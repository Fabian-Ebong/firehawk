[defaults]

# https://www.jeffgeerling.com/blog/2020/ansible-best-practices-using-project-local-collections-and-roles#comment-10932
# # Installs collections into [current dir]/ansible_collections/namespace/collection_name
# collections_paths = ./
collections_paths = ./ansible/

# # Installs roles into [current dir]/roles/namespace.rolename
roles_path = ./ansible/roles

gather_subset=!hardware # this line may help deal with an issue where a bad nfs mount will prevent ansible from connecting to the host.
log_path=tmp/log/ansible_log
callback_whitelist=profile_tasks

display_skipped_hosts = false # dont display skipped tasks

stdout_callback=yaml
bin_ansible_callbacks=True

# # mitogen accelerates ansible provisioning.
# strategy_plugins=/deployuser/ansible/plugins/mitogen-0.2.9/ansible_mitogen/plugins/strategy
# strategy=mitogen_linear

gather_timeout=2

timeout=2

[ssh_connection]
retries=2
pipelining=True # pipelining accelerates ansible provisioning.

[persistent_connection]
# Configures the persistent connection timeout value in seconds. This value is
# how long the persistent connection will remain idle before it is destroyed.
# If the connection doesn't receive a request before the timeout value
# expires, the connection is shutdown. The default value is 30 seconds.
connect_timeout = 2

# The command timeout value defines the amount of time to wait for a command
# or RPC call before timing out. The value for the command timeout must
# be less than the value of the persistent connection idle timeout (connect_timeout)
# The default value is 30 second.
command_timeout = 2